(function(t){function e(e){for(var s,i,r=e[0],c=e[1],u=e[2],p=0,h=[];p<r.length;p++)i=r[p],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&h.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(s=!1)}s&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={app:0},o=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/vue_app/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0c5d":function(t,e,a){},"2d95":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("header",[a("Navbar")],1),a("router-view")],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-navbar",{attrs:{type:"is-dark","fixed-top":"true"}},[a("template",{slot:"brand"},[a("b-navbar-item",{staticStyle:{"font-size":"28px"},attrs:{tag:"router-link",to:{path:"/"}}},[t._v("CatSplash")])],1),a("template",{slot:"end"},[a("b-navbar-item",{attrs:{tag:"div"}},[a("div",{staticClass:"button block",on:{click:t.onPostingPhotoClick}},[a("b-icon",{attrs:{icon:"paw"}}),a("div",[t._v("Posting Photo")])],1)]),a("div",{staticClass:"column is-2 is-marginless"}),t.isLogin?a("b-navbar-item",{attrs:{tag:"div"}},[a("div",{staticStyle:{"padding-right":"10px"}},[t._v(t._s(t.currentUser))]),a("b-tooltip",{attrs:{label:"ログアウト",type:"is-light",position:"is-bottom"}},[a("div",{staticClass:"buttons"},[a("a",{staticClass:"button is-warning",on:{click:t.logout}},[a("b-icon",{attrs:{icon:"logout"}})],1)])])],1):a("b-navbar-item",{attrs:{tag:"div"}},[a("div",{staticClass:"buttons"},[a("a",{staticClass:"button is-light",on:{click:t.toLoginPage}},[t._v("Log in / Sign up")])])])],1)],2),a("PostPhotoForm",{attrs:{isActive:t.isActive}})],1)},r=[],c=a("5530"),u=(a("96cf"),a("1da1")),l=a("2f62"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"columns is-centered"},[a("div",{staticClass:"column is-3 is_paddingless"}),a("div",{staticClass:"column is-3 is_paddingless"}),a("div",{staticClass:"column is-4 is_paddingless"},[a("b-message",{staticClass:"b-message__overlay",attrs:{title:"posting photo",active:t.isActive,closable:!1,"aria-close-label":"Close message",type:"is-warning"},on:{"update:active":function(e){t.isActive=e}}},[a("div",{staticClass:"content"},[a("div",{staticClass:"columns is-centered is-marginless",on:{change:t.onFileChange}},[t.preview?t._e():a("div",{staticClass:"columns is-marginless"},[a("b-field",[a("b-upload",{attrs:{multiple:"","drag-drop":""}},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),a("p",[t._v("画像をドロップ またはクリックして画像を選択")])])])])],1)],1),a("div",{staticClass:"columns has-text-centered is-marginless"},[t.preview?a("output",{staticClass:"column trim img"},[a("img",{attrs:{src:t.preview,alt:""}})]):t._e()])]),a("div",{staticClass:"columns is-centered"},[a("div",{staticClass:"column is-one-quarter"},[t.preview?a("b-button",{attrs:{type:"is-warning"},on:{click:t.reset}},[t._v("キャンセル")]):t._e()],1),a("div",{staticClass:"column is-one-quarter"}),a("div",{staticClass:"column is-one-quarter"},[t.preview?a("b-button",{attrs:{type:"is-dark"},on:{click:t.submit}},[t._v("送信")]):t._e()],1)])])])],1)])},h=[],m=(a("b0c0"),a("ac1f"),a("466d"),a("5319"),a("bc3a")),d=a.n(m),g={props:{isActive:{type:Boolean,default:!1,required:!0}},data:function(){return{preview:null,targetPhoto:null,limitFileSize:512e3,sendPhotoDataToDB:{photo:{account_id:null,filename:null}}}},methods:{onFileChange:function(t){var e=this;if(0===t.target.files.length)return this.reset(),this.$store.dispatch("toast/error","何も選択されませんでした！"),!1;if(!t.target.files[0].type.match("image.*"))return this.reset(),this.$store.dispatch("toast/error","画像以外が選択されています！"),!1;if(t.target.files[0].size>=this.limitFileSize)return this.reset(),this.$store.dispatch("toast/error","ファイルサイズの上限は500KBです！"),!1;var a=new FileReader;a.onload=function(t){e.preview=t.target.result},a.readAsDataURL(t.target.files[0]),this.targetPhoto=t.target.files[0]},reset:function(){this.preview="",this.$el.querySelector('input[type="file"]').value=null},submit:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/photos/s3?filename=".concat(t.targetPhoto.name)).then((function(t){return t.data})).catch((function(t){return console.log(t.message)}));case 2:for(n in a=e.sent,s=new FormData,a.fields)s.append(n,a.fields[n]);return s.append("file",t.targetPhoto),e.next=8,d.a.post(a.url,s,{headers:{accept:"multipart/form-data"}}).then((function(e){var a=e.data.match(/<Location>(.*?)<\/Location>/),s=unescape(a[1]);t.sendPhotoDataToDB.photo.account_id=t.$store.state.auth.user.data.id,t.sendPhotoDataToDB.photo.filename=s.replace("https://shimi-lynx-cat.s3.ap-northeast-1.amazonaws.com/uploads/photo/","")})).catch((function(t){return console.log(t.message)}));case 8:t.doSendPhotoData(),t.reset(),t.closeForm();case 11:case"end":return e.stop()}}),e)})))()},doSendPhotoData:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/photos",t.sendPhotoDataToDB).then((function(t){return console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},closeForm:function(){this.$parent.isActive=!1}}},f=g,v=(a("9f6b"),a("2877")),_=Object(v["a"])(f,p,h,!1,null,"6a5c71a0",null),b=_.exports,x={data:function(){return{isActive:!1}},methods:{toLoginPage:function(){this.$router.push("/auth",(function(){}))},logout:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("auth/logout");case 2:t.$router.push("/",(function(){}));case 3:case"end":return e.stop()}}),e)})))()},onPostingPhotoClick:function(){if(!this.isLogin)return this.$store.dispatch("toast/info","写真投稿はログイン時のみご利用頂けます"),!1;this.isActive=!this.isActive}},computed:Object(c["a"])({},Object(l["b"])({isLogin:"auth/isLogin",currentUser:"auth/currentUser"})),components:{PostPhotoForm:b}},k=x,w=Object(v["a"])(k,i,r,!1,null,null,null),j=w.exports,y={components:{Navbar:j}},C=y,D=Object(v["a"])(C,n,o,!1,null,null,null),R=D.exports,O=a("8c4f"),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Hero"),a("div",{staticClass:"container"},[a("div",{staticClass:"is-3-columns-grid"},[a("div",t._l(t.column_1_photoData,(function(t){return a("Photo",{key:t.id,attrs:{item:t}})})),1),a("div",t._l(t.column_2_photoData,(function(t){return a("Photo",{key:t.id,attrs:{item:t}})})),1),a("div",t._l(t.column_3_photoData,(function(t){return a("Photo",{key:t.id,attrs:{item:t}})})),1)])])],1)},$=[],S=a("b85c"),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("figure",{staticClass:"figure__target"},[a("img",{attrs:{src:""+t.s3url+t.item.filename}}),a("div",{staticClass:"figure__background"},[a("div",{staticClass:"owner"},[a("div",{staticClass:"content"},[t._v(t._s(t.item.account.name))])]),a("div",{staticClass:"like_button",on:{click:t.onLikeClick}},[a("div",{staticClass:"button block"},[a("b-icon",{class:{rotateY720:t.item.is_like},attrs:{icon:"cards-heart",type:{"is-danger":t.item.is_like}}}),a("div",[t._v(t._s(t.item.likes_count))])],1)])])]),a("div",{staticClass:"is_img_padding"})])},E=[],A={props:["item"],data:function(){return{s3url:"https://shimi-lynx-cat.s3.ap-northeast-1.amazonaws.com/uploads/photo/",isActive:!1}},methods:{onLikeClick:function(){var t=this;if(!this.$store.state.auth.header)return this.$store.dispatch("toast/info","いいね！ はログイン時のみご利用頂けます"),!1;var e={like:{account_id:this.$store.state.auth.user.data.id,photo_id:this.item.id}};this.item.is_like?d.a.delete("/photos/like",{data:e}).then((function(){t.item.is_like=!1,t.item.likes_count-=1})).catch((function(e){t.$store.dispatch("toast/error","いいね解除に失敗しました"),console.log(e)})):d.a.post("/photos/like",e).then((function(){t.item.is_like=!0,t.item.likes_count+=1})).catch((function(e){t.$store.dispatch("toast/error","いいねに失敗しました"),console.log(e)}))}}},U=A,T=(a("c5b1"),Object(v["a"])(U,L,E,!1,null,"196ca9a4",null)),F=T.exports,q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"hero is-large hero__background"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title has-text-white"},[t._v("Cat Splash")]),a("h2",{staticClass:"subtitle has-text-white"},[t._v("猫画像投稿サイト")]),a("h2",{staticClass:"subtitle has-text-white"},[t._v(" 個人制作の "),a("a",{staticClass:"has-text-white font__underline",attrs:{href:"https://github.com/shimi-lynx/catsplash",target:"_blank"}},[t._v("ポートフォリオサイト")]),t._v(" です。 ")])])])])}],H=(a("c61f"),{}),I=Object(v["a"])(H,q,z,!1,null,"d932ff98",null),B=I.exports,M={components:{Photo:F,Hero:B},data:function(){return{column_1_photoData:null,column_2_photoData:null,column_3_photoData:null,params:{photo:{account_id:9}}}},methods:{getPhotoLists:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,s,n,o,i,r,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("start get photo data"),e.next=3,d.a.get("/photos",t.params);case 3:a=e.sent,console.log(a),s=3,n=[],o=[],i=[],r=Object(S["a"])(a.data);try{for(r.s();!(c=r.n()).done;)u=c.value,s%3===0&&n.push(u),s%3===1&&o.push(u),s%3===2&&i.push(u),s++}catch(l){r.e(l)}finally{r.f()}t.column_1_photoData=n,t.column_2_photoData=o,t.column_3_photoData=i;case 14:case"end":return e.stop()}}),e)})))()}},computed:Object(c["a"])({},Object(l["b"])({currentUserID:"auth/currentUserID"})),watch:{$route:{handler:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPhotoLists();case 2:case"end":return e.stop()}}),e)})))()},immediate:!0}}},N=M,J=(a("fe2d"),Object(v["a"])(N,P,$,!1,null,"abd5cc4c",null)),V=J.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"grid"},[a("div",t._l(t.dummyData1,(function(t){return a("TestPhoto",{key:t.id,attrs:{src:t}})})),1),a("div",t._l(t.dummyData2,(function(t){return a("TestPhoto",{key:t.id,attrs:{src:t}})})),1),a("div",t._l(t.dummyData3,(function(t){return a("TestPhoto",{key:t.id,attrs:{src:t}})})),1)])])},K=[],Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("figure",{staticClass:"pad"},[a("img",{attrs:{src:t.src}})])},G=[],Q={props:["src"]},W=Q,X=(a("8b76"),Object(v["a"])(W,Y,G,!1,null,"050ae807",null)),tt=X.exports,et={components:{TestPhoto:tt},data:function(){return{dummyData1:{neko1:"https://cdn.pixabay.com/photo/2015/02/02/21/28/cat-621612_1280.jpg",neko2:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko3:"https://cdn.pixabay.com/photo/2017/11/29/21/27/snow-2987128_1280.jpg",neko4:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko5:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko6:"https://cdn.pixabay.com/photo/2015/02/02/21/28/cat-621612_1280.jpg",neko7:"https://cdn.pixabay.com/photo/2017/11/29/21/27/snow-2987128_1280.jpg",neko8:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko9:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko10:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko11:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko12:"https://cdn.pixabay.com/photo/2017/11/29/21/27/snow-2987128_1280.jpg",neko13:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko14:"https://cdn.pixabay.com/photo/2015/02/02/21/28/cat-621612_1280.jpg",neko15:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko16:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko17:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko18:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko19:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko20:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko21:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg"},dummyData2:{neko2:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko3:"https://cdn.pixabay.com/photo/2017/11/29/21/27/snow-2987128_1280.jpg",neko5:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko7:"https://cdn.pixabay.com/photo/2017/11/29/21/27/snow-2987128_1280.jpg",neko8:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko9:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko10:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko13:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko14:"https://cdn.pixabay.com/photo/2015/02/02/21/28/cat-621612_1280.jpg",neko15:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko16:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko17:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko18:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko19:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko20:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko21:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg"},dummyData3:{neko1:"https://cdn.pixabay.com/photo/2015/02/02/21/28/cat-621612_1280.jpg",neko4:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko5:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko6:"https://cdn.pixabay.com/photo/2015/02/02/21/28/cat-621612_1280.jpg",neko7:"https://cdn.pixabay.com/photo/2017/11/29/21/27/snow-2987128_1280.jpg",neko8:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko11:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko12:"https://cdn.pixabay.com/photo/2017/11/29/21/27/snow-2987128_1280.jpg",neko13:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko14:"https://cdn.pixabay.com/photo/2015/02/02/21/28/cat-621612_1280.jpg",neko15:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko16:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko17:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko18:"https://pixnio.com/free-images/2018/07/10/2018-07-10-21-27-44-1200x716.jpg",neko19:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko20:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg",neko21:"https://cdn.pixabay.com/photo/2019/06/08/17/02/cat-4260536_960_720.jpg"},itemUrls:null}}},at=et,st=(a("ee2c"),Object(v["a"])(at,Z,K,!1,null,"24d8471e",null)),nt=st.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t.is_account_confirmation_success?a("div",[t._v(t._s(t.success()))]):t._e(),a("b-tabs",{attrs:{position:"is-centered",type:"is-toggle"}},[a("b-tab-item",{attrs:{label:"ログイン"}},[a("LoginForm")],1),a("b-tab-item",{attrs:{label:"ユーザ登録"}},[a("RegisterForm")],1)],1)],1)},it=[],rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container is-fluid"},[a("div",{staticClass:"columns is-centered is-marginless"},[a("div",{staticClass:"column is-half"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[a("h1",{staticClass:"title"},[t._v("ユーザ登録")]),a("b-field",{attrs:{label:"名前"}},[a("b-input",{model:{value:t.RegisterData.name,callback:function(e){t.$set(t.RegisterData,"name",e)},expression:"RegisterData.name"}})],1),a("b-field",{attrs:{label:"メールアドレス"}},[a("b-input",{attrs:{type:"email"},model:{value:t.RegisterData.email,callback:function(e){t.$set(t.RegisterData,"email",e)},expression:"RegisterData.email"}})],1),a("b-field",{attrs:{label:"パスワード"}},[a("b-input",{attrs:{type:"password","password-reveal":""},model:{value:t.RegisterData.password,callback:function(e){t.$set(t.RegisterData,"password",e)},expression:"RegisterData.password"}})],1),a("b-field",{attrs:{label:"パスワード（確認）"}},[a("b-input",{attrs:{type:"password","password-reveal":""},model:{value:t.RegisterData.password_confirmation,callback:function(e){t.$set(t.RegisterData,"password_confirmation",e)},expression:"RegisterData.password_confirmation"}})],1),a("b-button",{attrs:{type:"is-success"},on:{click:t.accountRegister}},[t._v("登録")])],1)])])])])},ct=[],ut=(a("dca8"),Object.freeze({SUCCSESS:200,UN_AUTHORIZED:401,CREATED:201})),lt={data:function(){return{RegisterData:{name:"",email:"",password:"",password_confirmation:""}}},methods:{accountRegister:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.RegisterData.name){e.next=3;break}return t.$store.dispatch("toast/error","名前を入力して下さい"),e.abrupt("return",!1);case 3:return e.next=5,t.$store.dispatch("auth/accountRegister",t.RegisterData).catch((function(t){return console.log(t)}));case 5:t.$store.state.auth.httpresponse===ut.SUCCSESS&&t.$router.push("/auth/confirm",(function(){}));case 6:case"end":return e.stop()}}),e)})))()}}},pt=lt,ht=Object(v["a"])(pt,rt,ct,!1,null,null,null),mt=ht.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container is-fluid"},[a("div",{staticClass:"columns is-centered is-marginless"},[a("div",{staticClass:"column is-half"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[a("h1",{staticClass:"title"},[t._v("ログイン")]),a("b-field",{attrs:{label:"メールアドレス"}},[a("b-input",{attrs:{type:"email"},model:{value:t.LoginData.email,callback:function(e){t.$set(t.LoginData,"email",e)},expression:"LoginData.email"}})],1),a("b-field",{attrs:{label:"パスワード"}},[a("b-input",{attrs:{type:"password","password-reveal":""},model:{value:t.LoginData.password,callback:function(e){t.$set(t.LoginData,"password",e)},expression:"LoginData.password"}})],1),a("b-button",{attrs:{type:"is-success"},on:{click:t.login}},[t._v("Log in")])],1)])])])])},gt=[],ft={data:function(){return{LoginData:{email:"hoge@email.com",password:"password"}}},methods:{login:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("auth/login",t.LoginData);case 2:t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()}}},vt=ft,_t=Object(v["a"])(vt,dt,gt,!1,null,null,null),bt=_t.exports,xt={components:{RegisterForm:mt,LoginForm:bt},data:function(){return{is_account_confirmation_success:this.$route.query.account_confirmation_success}},methods:{success:function(){this.$buefy.toast.open({duration:1e4,message:"アカウントが有効化に成功！いつでもログイン出来ます！！",type:"is-success"})}}},kt=xt,wt=Object(v["a"])(kt,ot,it,!1,null,null,null),jt=wt.exports,yt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container is-fluid"},[a("div",{staticClass:"columns is-centered is-marginless"},[a("div",{staticClass:"column is-three-quarters"},[a("div",{staticClass:"content is-large"},[t._v("ユーザ登録確認の為にメールを送信しました。メール本文の「アカウントを有効化する」をクリックしてユーザ登録を完了させて下さい。")])])])])}],Dt={},Rt=Object(v["a"])(Dt,yt,Ct,!1,null,null,null),Ot=Rt.exports;s["a"].use(O["a"]);var Pt=[{path:"/",name:"PhotoList",component:V},{path:"/auth",name:"Auth",component:jt},{path:"/auth/confirm",name:"confirm",component:Ot},{path:"/test",name:"TestPhotoList",component:nt}],$t=new O["a"]({mode:"history",base:"/vue_app/",routes:Pt}),St=$t,Lt=a("0e44"),Et={user:null,header:null,httpresponse:null},At={isLogin:function(t){return!!t.user},currentUser:function(t){return t.user?t.user.data.name:""},currentUserID:function(t){return t.user?t.user.data.id:""}},Ut={setUser:function(t,e){t.user=e},setHeader:function(t,e){t.header=e},setHttpresponse:function(t,e){t.httpresponse=e}},Tt={accountRegister:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,d.a.post("/auth",e).then((function(e){console.log(e),t.commit("setHttpresponse",e.status)})).catch((function(e){t.dispatch("toast/error","入力内容に不備があります",{root:!0}),console.log(e.message)}));case 2:case"end":return a.stop()}}),a)})))()},login:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,d.a.post("/auth/sign_in",e).catch((function(e){e.response.status===ut.UN_AUTHORIZED?t.dispatch("toast/error","メールアドレスまたはパスワードに誤りがあります",{root:!0}):t.dispatch("toast/error","ログインに失敗しました",{root:!0}),console.log(e.response)}));case 2:s=a.sent,t.commit("setUser",s.data),t.commit("setHeader",s.headers),t.dispatch("toast/success","ログインしました",{root:!0}),console.log(s);case 7:case"end":return a.stop()}}),a)})))()},logout:function(t){return Object(u["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("/auth/sign_out",{headers:Et.header}).catch((function(t){return console.log(t.message)}));case 2:a=e.sent,t.commit("setHeader",null),t.commit("setUser",null),t.dispatch("toast/success","ログアウトしました",{root:!0}),console.log("削除前"),console.log(window.sessionStorage.getItem("AuthData")),window.sessionStorage.removeItem("AuthData"),window.sessionStorage.clear(),console.log("削除後"),console.log(window.sessionStorage.getItem("AuthData")),console.log(a);case 13:case"end":return e.stop()}}),e)})))()}},Ft={namespaced:!0,state:Et,getters:At,mutations:Ut,actions:Tt},qt=a("aced"),zt={message:null},Ht={},It={setMessage:function(t,e){t.message=e}},Bt={success:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.commit("setMessage",e),qt["a"].open({duration:5e3,message:e,type:"is-success"});case 2:case"end":return a.stop()}}),a)})))()},info:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.commit("setMessage",e),qt["a"].open({duration:5e3,message:e,type:"is-info"});case 2:case"end":return a.stop()}}),a)})))()},error:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.commit("setMessage",e),qt["a"].open({duration:5e3,message:e,type:"is-danger"});case 2:case"end":return a.stop()}}),a)})))()}},Mt={namespaced:!0,state:zt,getters:Ht,mutations:It,actions:Bt};s["a"].use(l["a"]);var Nt=new l["a"].Store({modules:{auth:Ft,toast:Mt},plugins:[Object(Lt["a"])({key:"AuthData",paths:["auth.user","auth.header"],storage:window.sessionStorage})]}),Jt=a("289d");a("5abe"),a("5363"),a("d3b7");function Vt(){if(sessionStorage.AuthData){var t=JSON.parse(sessionStorage.getItem("AuthData"));t.auth.header&&d.a.interceptors.request.use((function(e){return e.headers=t.auth.header,e}))}d.a.interceptors.request.use((function(t){return Ft.state.header&&(t.headers=Ft.state.header),t}),(function(t){return Promise.reject(t)}))}s["a"].config.productionTip=!1,d.a.defaults.baseURL=Object({NODE_ENV:"production",VUE_APP_S3_URL:"https://shimi-lynx-cat.s3.ap-northeast-1.amazonaws.com/uploads/photo/",BASE_URL:"/vue_app/"}).VUE_APP_BASE_URL,Vt(),s["a"].use(Jt["a"]),new s["a"]({router:St,store:Nt,axios:d.a,render:function(t){return t(R)}}).$mount("#app")},"8b76":function(t,e,a){"use strict";var s=a("d312"),n=a.n(s);n.a},"8cf7":function(t,e,a){},"9f6b":function(t,e,a){"use strict";var s=a("8cf7"),n=a.n(s);n.a},b1bb:function(t,e,a){},c5b1:function(t,e,a){"use strict";var s=a("0c5d"),n=a.n(s);n.a},c61f:function(t,e,a){"use strict";var s=a("2d95"),n=a.n(s);n.a},d312:function(t,e,a){},ee2c:function(t,e,a){"use strict";var s=a("b1bb"),n=a.n(s);n.a},f9e1:function(t,e,a){},fe2d:function(t,e,a){"use strict";var s=a("f9e1"),n=a.n(s);n.a}});
//# sourceMappingURL=app.147d734a.js.map